Valaran.App=function(t,e,n,r,a,i,s){"use strict";function o(t){null!==t&&""!==t&&r.info(t,null,{preventDuplicates:!0})}function l(e){var n=t.Entities.Stars[e.target.attrs.starId].color,r=t.Entities.Stars[e.target.attrs.starId].x,a=t.Entities.Stars[e.target.attrs.starId].y;o("ID: "+e.target.attrs.starId+", Farbe: "+n+", x: "+r+", y: "+a)}function u(){o("")}function c(){for(var e in t.Entities.Stars){var r=new n.Circle({x:t.Entities.Stars[e].x+t.Entities.Stars[e].radius,y:t.Entities.Stars[e].y+t.Entities.Stars[e].radius,radius:t.Entities.Stars[e].radius,fill:t.Entities.Stars[e].color,stroke:"black",strokeWidth:1,starId:t.Entities.Stars[e].id}).on("mousemove",l(event)).on("mouseout",u);p.add(r)}}var f=a.innerWidth,d=a.innerHeight,x=80,g=0,m=!1,y=new n.Stage({container:"field",width:f,height:d-70}),v=new n.Layer({}),p=new n.Group({x:0,y:0}),h=new n.Text({x:10,y:10,fontFamily:"Calibri",fontSize:24,text:"",fill:"black"});v.add(h),v.add(p),y.add(v);var w=function(){},k=function(){},S=i.getElementById("login"),E=i.getElementById("username"),b=i.getElementById("password"),I=i.getElementById("submit"),D=i.getElementById("game");I.onclick=function(){e.emit("login",{user:E.value,pass:b.value})},e.on("login",function(e){e.success?(t.Server.game_settings=e.game_settings,t.Entities.Stars=e.stars,c(),v.draw(),S.style.display="none",D.style.display="inline-block",m=!0):(r.error(e.msg),console.log(e))});var _=!1;a.onresize=function(){_===!1&&(_=!0,setTimeout(function(){y.width(a.innerWidth),y.height(a.innerHeight),v.draw(),_=!1},500))},$(i).keyup(function(e){m&&(e.preventDefault(),t.Keymap.keyup(e.keyCode))}),$(i).keydown(function(e){if(m){e.preventDefault();var n=t.Keymap.keydown(e.keyCode),r=0,i=0;"left"===n&&(r=v.getAttr("x"),-10>=r&&(x=r+10,v.move({x:10}),v.batchDraw())),"right"===n&&(r=v.getAttr("x"),r>a.innerWidth-t.Server.game_settings.WIDTH-10&&(x=r-10,v.move({x:-10}),v.batchDraw())),"up"===n&&(i=v.getAttr("y"),-10>=i&&(g=i+10,v.move({y:10}),v.batchDraw())),"down"===n&&(i=v.getAttr("y"),i>a.innerHeight-t.Server.game_settings.HEIGHT-80&&(g=i-10,v.move({y:-10}),v.batchDraw()))}}),setInterval(function(){w(),k()},40)}(Valaran,socket,Konva,toastr,window,document),Valaran.Entities=function(t,e){"use strict";var n={},r=function(e,r,a,i){var s=t.Util.generateUUID(),o={x:e,y:r,radius:a,color:i,id:s};return o.getDistance=function(t){var e=o.x-t.x,n=o.y-t.y;return Math.sqrt(e*e+n*n)-o.radius-t.radius},n[s]=o,o};return{Stars:n,Star:r}}(Valaran),Valaran.Keymap=function(){"use strict";var t=!1,e=!1,n=!1,r={8:"backspace",9:"tab",13:"ret",16:"shift",17:"ctrl",18:"alt",19:"?",20:"caps_lock",27:"esc",32:"spc",33:"pgup",34:"pgdn",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equal",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"ctrl",93:"ctrl",107:"equal",109:"minus",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"num_lock",145:"scroll_lock",186:"semicolon",187:"equal",188:"comma",189:"minus",190:"dot",191:"slash",192:"apostrophe",219:"bracket_left",220:"backslash",221:"bracket_right",222:"'",224:"ctrl"},a=function(a){var i=r[a];if(!i)return null;if("shift"===i)return t=!0,null;if("ctrl"===i)return e=!0,null;if("alt"===i)return n=!0,null;var s="";return t&&(s+="shift-"),e&&(s+="ctrl-"),n&&(s+="alt-"),s+i},i=function(a){var i=r[a];"shift"===i?t=!1:"ctrl"===i?e=!1:"alt"===i&&(n=!1)};return{keydown:a,keyup:i}}(),Valaran.Server=function(){"use strict";var t={};return{game_settings:t}}(),Valaran.Util=function(t,e,n,r){"use strict";var a=function(){var r=t.now();e.performance&&"function"==typeof e.performance.now&&(r+=performance.now());var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(r+16*n.random())%16|0;return r=n.floor(r/16),("x"===t?e:3&e|8).toString(16)});return a};return{generateUUID:a}}(Date,window,Math);